{"version":3,"file":"index.umd.min.js","sources":["../src/stack.ts","../src/index.ts"],"sourcesContent":[null,null],"names":["Stack","undoStack","redoStack","restoreState","saveState","state","this","push","deepCopy","length","undo","lastState","pop","previousState","worldOffsetX","worldOffsetY","pointGroup","doRestoreState","redo","nextState","obj","hash","WeakMap","Object","has","get","result","Array","isArray","set","keys","forEach","key","defaultGridFillStyle","defaultRuleStrokeStyle","defaultColor","defaultBorderStyle","defaultOptions","grid","gridGap","gridFillStyle","rule","ruleGap","ruleUnitLen","ruleStrokeStyle","voice","color","stack","cleanR","moveCountTotal","writeLocked","dragLocked","showBorder","borderStyle","borderWidth","Board","canvas","width","height","ctx","scrolling","d","maxD","pointsGroup","cleanState","cleanX","cleanY","cleanPress","stackObj","minX","minY","maxX","maxY","moveT","gridPattern","containerOffset","constructor","options","scrollingElement","document","rect","getBoundingClientRect","x","scrollLeft","y","scrollTop","prevWorldOffsetX","prevWorldOffsetY","offsetX","offsetY","preOffsetX","preOffsetY","doMove","draw","getContext","generateGridPattern","loadEvent","setVoice","showGrid","hideGrid","showRule","hideRule","i","self","requestAnimationFrame","scrollBy","clear","exportAsCanvas","createElement","undefined","corners","fillStyle","wx11","wy11","wx12","wy12","wx21","wy21","wx22","wy22","x11","y11","x12","y12","x21","y21","x22","y22","save","beginPath","moveTo","lineTo","fill","restore","clean","unclean","clearRect","loadGrid","doWriting","drawEraser","loadRule","loadBorder","hasWrited","isDoubleTouch","dragStartX","dragStartY","dragStartTime","dragEndX","dragEndY","dragEndTime","needPushPoints","isSingleTouch","writeStartX","writeStartY","writeStartTime","writeEndX","writeEndY","writeEndTime","handleWriteStart","coords","pageX","pageY","performance","now","handleTouchStart","event","touches","getPageCoords","handleMouseStart","handleWriteMove","doClean","pushPoints","handleMouseMove","handleTouchMove","deltaX","deltaY","scrollDecay","speedX","speedY","t","_scrollDecay","Math","abs","ratio","max","handleWriteEnd","deltaTime","addEventListener","passive","containerX","containerY","totalX","totalY","touch","strokeStyle","arc","PI","stroke","x0","y0","group","x1","y1","x2","y2","x4","y4","x3","y3","isCircleIntersectRect","splice","r","dist","sqrt","edges","ex1","ey1","ex2","ey2","d1","d2","dx","dy","getCornerCoordinate","a","b","c","getCornersCoordinate","originD","isNaN","points","flat","some","xy","lastPoints","idx","min","gap","bgOffscreen","OffscreenCanvas","fillRect","createPattern","coordX","negativeRemainder","coordY","translate","lineWidth","strokeRect","font","textAlign","offsetXRule","offsetYRule","j","fontGap","len","textBaseline","fillText","String"],"mappings":"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"}